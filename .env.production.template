# ========================================
# TRADEAI Production Environment Template
# ========================================
# Copy this file to .env.production and fill in the values
# NEVER commit .env.production to version control!

# ========================================
# CRITICAL: REQUIRED FOR PRODUCTION
# ========================================

# Environment
NODE_ENV=production

# Security Features
ENABLE_RATE_LIMITING=true

# Server
PORT=5000
API_URL=https://api.your-domain.com

# Database - MongoDB
MONGODB_URI=mongodb://username:password@production-host:27017/tradeai-prod?authSource=admin
# For MongoDB Atlas:
# MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/tradeai-prod?retryWrites=true&w=majority

# Redis Cache
REDIS_HOST=your-redis-host.com
REDIS_PORT=6379
REDIS_PASSWORD=your-redis-password
REDIS_DB=0

# JWT Authentication
# IMPORTANT: Generate strong, unique secrets!
# Use: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=CHANGE_THIS_TO_A_STRONG_RANDOM_SECRET_AT_LEAST_64_CHARS
JWT_EXPIRES_IN=7d
JWT_REFRESH_SECRET=CHANGE_THIS_TO_ANOTHER_STRONG_RANDOM_SECRET
JWT_REFRESH_EXPIRES_IN=30d

# CORS Configuration
# Comma-separated list of allowed origins
CORS_ORIGINS=https://app.your-domain.com,https://admin.your-domain.com

# ========================================
# HIGHLY RECOMMENDED
# ========================================

# Error Tracking (Sentry)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=production

# Logging
LOG_LEVEL=warn  # Options: error, warn, info, debug
LOG_FORMAT=json

# File Upload
UPLOAD_DIR=/var/app/uploads
TEMP_DIR=/var/app/temp

# ========================================
# OPTIONAL: Email Configuration
# ========================================

# Email Provider (sendgrid or smtp)
EMAIL_PROVIDER=sendgrid
EMAIL_FROM=noreply@your-domain.com

# SendGrid Configuration
SENDGRID_API_KEY=SG.your-sendgrid-api-key
SENDGRID_WELCOME_TEMPLATE=d-welcome-template-id
SENDGRID_RESET_PASSWORD_TEMPLATE=d-reset-password-template-id
SENDGRID_APPROVAL_TEMPLATE=d-approval-template-id
SENDGRID_NOTIFICATION_TEMPLATE=d-notification-template-id

# OR SMTP Configuration (if not using SendGrid)
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_SECURE=false
# SMTP_USER=your-email@gmail.com
# SMTP_PASS=your-email-password

# ========================================
# OPTIONAL: SAP Integration
# ========================================

# SAP ERP Connection
SAP_BASE_URL=https://your-sap-server.com:50000
SAP_USERNAME=sap-api-user
SAP_PASSWORD=sap-api-password
SAP_CLIENT=100
SAP_LANGUAGE=EN
SAP_SYNC_INTERVAL=0 2 * * *  # Daily at 2 AM

# ========================================
# OPTIONAL: Rate Limiting Customization
# ========================================

# Override default rate limits (defaults shown)
# RATE_LIMIT_WINDOW_MS=900000  # 15 minutes in milliseconds
# RATE_LIMIT_MAX=100  # Max requests per window

# ========================================
# SECURITY NOTES
# ========================================

# 1. JWT_SECRET & JWT_REFRESH_SECRET:
#    - Must be at least 64 characters
#    - Use crypto.randomBytes to generate
#    - NEVER use default values in production
#    - Store securely (AWS Secrets Manager, HashiCorp Vault, etc.)

# 2. CORS_ORIGINS:
#    - NEVER use '*' in production
#    - List all allowed domains explicitly
#    - Include protocol (https://)
#    - No trailing slashes

# 3. Database Credentials:
#    - Use strong passwords (20+ characters)
#    - Restrict database user permissions (principle of least privilege)
#    - Enable IP whitelisting
#    - Use SSL/TLS for database connections

# 4. Redis:
#    - Always set REDIS_PASSWORD in production
#    - Use Redis 6+ with ACLs if possible
#    - Restrict network access to Redis port

# 5. API Keys:
#    - Rotate API keys regularly (every 90 days)
#    - Use environment-specific keys
#    - Monitor API usage for anomalies

# ========================================
# DEPLOYMENT CHECKLIST
# ========================================

# Before deploying, verify:
# [ ] NODE_ENV=production is set
# [ ] JWT secrets are changed from defaults
# [ ] Database URI points to production database
# [ ] CORS_ORIGINS is restricted to your domains
# [ ] ENABLE_RATE_LIMITING=true
# [ ] Redis is configured with password
# [ ] Sentry DSN is configured (optional but recommended)
# [ ] HTTPS/SSL certificates are installed
# [ ] Firewall rules are configured
# [ ] Database backups are automated
# [ ] Monitoring and alerts are set up

# ========================================
# QUICK START COMMANDS
# ========================================

# 1. Copy this template:
#    cp .env.production.template .env.production

# 2. Generate JWT secrets:
#    node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"

# 3. Edit .env.production with your values:
#    nano .env.production  # or vim, code, etc.

# 4. Start production server:
#    NODE_ENV=production npm start
#    # OR
#    pm2 start ecosystem.config.js --env production

# ========================================
# SUPPORT
# ========================================

# For issues or questions:
# - Review UAT_FINAL_REPORT.md for configuration details
# - Check logs in /var/app/logs/ (or your LOG_DIR)
# - Monitor Sentry for error tracking
# - Contact DevOps team for infrastructure issues
