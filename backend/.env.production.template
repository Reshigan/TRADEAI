# ═══════════════════════════════════════════════════════════════════════════
# TRADEAI - PRODUCTION ENVIRONMENT CONFIGURATION TEMPLATE
# ═══════════════════════════════════════════════════════════════════════════
#
# SECURITY WARNING: This is a template file. DO NOT commit actual secrets!
# 
# Instructions:
# 1. Copy this file to .env.production
# 2. Replace all placeholder values with actual production secrets
# 3. Ensure .env.production is in .gitignore
# 4. Use strong, randomly generated secrets (see generation commands below)
#
# Generate secrets using:
#   node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
#
# ═══════════════════════════════════════════════════════════════════════════

# ─────────────────────────────────────────────────────────────────────────
# ENVIRONMENT
# ─────────────────────────────────────────────────────────────────────────
NODE_ENV=production
PORT=5002

# ─────────────────────────────────────────────────────────────────────────
# DATABASE - MongoDB Production Instance
# ─────────────────────────────────────────────────────────────────────────
# Replace with your production MongoDB connection string
# Format: mongodb://username:password@host:port/database?options
# Example: mongodb+srv://user:pass@cluster.mongodb.net/tradeai?retryWrites=true&w=majority
MONGODB_URI=mongodb://[REPLACE_WITH_PRODUCTION_MONGODB_URI]
USE_MOCK_DB=false

# MongoDB Connection Pool Settings
MONGODB_MAX_POOL_SIZE=50
MONGODB_MIN_POOL_SIZE=10
MONGODB_CONNECTION_TIMEOUT=30000

# ─────────────────────────────────────────────────────────────────────────
# REDIS CACHE - Production Redis Instance
# ─────────────────────────────────────────────────────────────────────────
# Replace with your production Redis credentials
REDIS_HOST=[REPLACE_WITH_REDIS_HOST]
REDIS_PORT=6379
REDIS_PASSWORD=[REPLACE_WITH_STRONG_REDIS_PASSWORD]
REDIS_DB=0
REDIS_TLS=true
REDIS_KEY_PREFIX=tradeai:prod:

# Redis Connection Pool
REDIS_MAX_RETRIES=3
REDIS_CONNECTION_TIMEOUT=10000

# ─────────────────────────────────────────────────────────────────────────
# JWT AUTHENTICATION - CRITICAL SECURITY SETTINGS
# ─────────────────────────────────────────────────────────────────────────
# ⚠️  SECURITY CRITICAL: Generate NEW secrets for production!
# Use: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"

# Main JWT secret (128 character hexadecimal string)
JWT_SECRET=[REPLACE_WITH_STRONG_JWT_SECRET_128_CHARS]
JWT_EXPIRES_IN=8h
JWT_ALGORITHM=HS512

# Refresh token secret (different from JWT_SECRET)
JWT_REFRESH_SECRET=[REPLACE_WITH_DIFFERENT_REFRESH_SECRET_128_CHARS]
JWT_REFRESH_EXPIRES_IN=7d

# JWT Additional Security
JWT_ISSUER=tradeai-production
JWT_AUDIENCE=tradeai-users

# ─────────────────────────────────────────────────────────────────────────
# RATE LIMITING - DDoS Protection
# ─────────────────────────────────────────────────────────────────────────
# General API rate limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Auth endpoint specific limits (stricter)
AUTH_RATE_LIMIT_WINDOW_MS=900000
AUTH_RATE_LIMIT_MAX_REQUESTS=5

# ─────────────────────────────────────────────────────────────────────────
# CORS - Cross-Origin Resource Sharing
# ─────────────────────────────────────────────────────────────────────────
# Replace with your actual production frontend domain(s)
# Multiple domains: separate with commas
CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
CORS_CREDENTIALS=true

# ─────────────────────────────────────────────────────────────────────────
# EMAIL CONFIGURATION - Production Email Service
# ─────────────────────────────────────────────────────────────────────────
EMAIL_PROVIDER=sendgrid
EMAIL_FROM=noreply@yourdomain.com
EMAIL_FROM_NAME=TradeAI Team

# SendGrid Configuration (recommended for production)
SENDGRID_API_KEY=[REPLACE_WITH_SENDGRID_API_KEY]
SENDGRID_WELCOME_TEMPLATE=[TEMPLATE_ID]
SENDGRID_RESET_PASSWORD_TEMPLATE=[TEMPLATE_ID]
SENDGRID_APPROVAL_TEMPLATE=[TEMPLATE_ID]
SENDGRID_NOTIFICATION_TEMPLATE=[TEMPLATE_ID]

# SMTP (alternative to SendGrid)
SMTP_HOST=[SMTP_HOST]
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=[SMTP_USERNAME]
SMTP_PASS=[SMTP_PASSWORD]

# ─────────────────────────────────────────────────────────────────────────
# SAP INTEGRATION - Enterprise System Connection
# ─────────────────────────────────────────────────────────────────────────
SAP_BASE_URL=https://[YOUR_SAP_DOMAIN]
SAP_USERNAME=[SAP_SERVICE_ACCOUNT_USERNAME]
SAP_PASSWORD=[SAP_SERVICE_ACCOUNT_PASSWORD]
SAP_CLIENT=[SAP_CLIENT_NUMBER]
SAP_LANGUAGE=EN
SAP_SYNC_INTERVAL=0 2 * * *
SAP_TIMEOUT=30000
SAP_RETRY_ATTEMPTS=3

# ─────────────────────────────────────────────────────────────────────────
# CLIENT/FRONTEND URL
# ─────────────────────────────────────────────────────────────────────────
CLIENT_URL=https://yourdomain.com
API_BASE_URL=https://api.yourdomain.com

# ─────────────────────────────────────────────────────────────────────────
# FILE UPLOAD & STORAGE
# ─────────────────────────────────────────────────────────────────────────
# For production, consider using cloud storage (S3, GCS, Azure Blob)
UPLOAD_DIR=/var/app/uploads
TEMP_DIR=/var/app/temp
MAX_FILE_SIZE=10485760

# AWS S3 (optional - for cloud file storage)
AWS_ACCESS_KEY_ID=[AWS_ACCESS_KEY]
AWS_SECRET_ACCESS_KEY=[AWS_SECRET_KEY]
AWS_REGION=us-east-1
AWS_S3_BUCKET=[BUCKET_NAME]

# ─────────────────────────────────────────────────────────────────────────
# LOGGING & MONITORING
# ─────────────────────────────────────────────────────────────────────────
LOG_LEVEL=warn
LOG_FORMAT=json
LOG_FILE_PATH=/var/log/tradeai/
LOG_MAX_FILES=30d
LOG_MAX_SIZE=100m

# ─────────────────────────────────────────────────────────────────────────
# ERROR TRACKING - Sentry Configuration
# ─────────────────────────────────────────────────────────────────────────
SENTRY_DSN=[REPLACE_WITH_SENTRY_DSN]
SENTRY_ENVIRONMENT=production
SENTRY_RELEASE=[APP_VERSION]
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_ENABLED=true

# ─────────────────────────────────────────────────────────────────────────
# SECURITY HEADERS
# ─────────────────────────────────────────────────────────────────────────
HELMET_ENABLED=true
HSTS_MAX_AGE=31536000
CSP_ENABLED=true

# ─────────────────────────────────────────────────────────────────────────
# SESSION CONFIGURATION
# ─────────────────────────────────────────────────────────────────────────
SESSION_SECRET=[REPLACE_WITH_STRONG_SESSION_SECRET_128_CHARS]
SESSION_NAME=tradeai.sid
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=strict
SESSION_MAX_AGE=86400000

# ─────────────────────────────────────────────────────────────────────────
# ENCRYPTION KEYS - For sensitive data encryption
# ─────────────────────────────────────────────────────────────────────────
ENCRYPTION_KEY=[REPLACE_WITH_32_BYTE_ENCRYPTION_KEY]
ENCRYPTION_ALGORITHM=aes-256-gcm

# ─────────────────────────────────────────────────────────────────────────
# API KEYS - Third-party Services
# ─────────────────────────────────────────────────────────────────────────
OPENAI_API_KEY=[REPLACE_IF_USING_AI_FEATURES]
TWILIO_ACCOUNT_SID=[REPLACE_IF_USING_SMS]
TWILIO_AUTH_TOKEN=[REPLACE_IF_USING_SMS]

# ─────────────────────────────────────────────────────────────────────────
# HEALTH CHECK & MONITORING
# ─────────────────────────────────────────────────────────────────────────
HEALTH_CHECK_INTERVAL=60000
HEALTH_CHECK_TIMEOUT=5000
ENABLE_METRICS=true
METRICS_PORT=9090

# ─────────────────────────────────────────────────────────────────────────
# DATABASE BACKUP
# ─────────────────────────────────────────────────────────────────────────
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 3 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_DESTINATION=[S3_BUCKET_OR_PATH]

# ─────────────────────────────────────────────────────────────────────────
# FEATURE FLAGS
# ─────────────────────────────────────────────────────────────────────────
ENABLE_AI_FEATURES=true
ENABLE_SAP_SYNC=true
ENABLE_EMAIL_NOTIFICATIONS=true
ENABLE_WEBHOOKS=true
MAINTENANCE_MODE=false

# ═══════════════════════════════════════════════════════════════════════════
# END OF CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════
#
# SECURITY CHECKLIST BEFORE DEPLOYMENT:
# □ All [REPLACE_*] placeholders updated with actual values
# □ JWT_SECRET and JWT_REFRESH_SECRET are strong and different
# □ CORS_ORIGINS set to actual production domain only
# □ MongoDB URI uses authentication and SSL/TLS
# □ Redis password is strong and unique
# □ Sentry DSN configured for error tracking
# □ Email service credentials validated
# □ File paths have proper permissions
# □ All sensitive values are kept secret
# □ .env.production added to .gitignore
#
# ═══════════════════════════════════════════════════════════════════════════
