# Log rotation configuration for Trade AI Platform

/logs/*.log /logs/*/*.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 644 root root
    postrotate
        # Send HUP signal to applications to reopen log files
        /usr/bin/docker exec trade-ai-backend-prod kill -HUP 1 2>/dev/null || true
        /usr/bin/docker exec trade-ai-ai-services-prod kill -HUP 1 2>/dev/null || true
        /usr/bin/docker exec trade-ai-monitoring-prod kill -HUP 1 2>/dev/null || true
    endscript
}

/logs/nginx/*.log {
    daily
    missingok
    rotate 52
    compress
    delaycompress
    notifempty
    create 644 root root
    sharedscripts
    postrotate
        /usr/bin/docker exec trade-ai-nginx-prod nginx -s reload 2>/dev/null || true
    endscript
}